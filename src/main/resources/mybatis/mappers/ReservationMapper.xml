<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="kr.co.nc.mapper.ReservationMapper">

<!--void insertReservation(Reservation reservation); -->
<insert id="insertReservation" parameterType="kr.co.nc.vo.Reservation">
	insert 	into reservation
		(reservation_id, reservation_status, reservation_check_in, reservation_check_out, reservation_name, reservation_tel)
	values
		(reservation_seq.nextval,#{status},#{checkIn},#{checkOut},#{reserName},#{reserTel})		
</insert>

<!-- 	List<Reservation> getAllReserveInfoByReserveId(int reservationId); 예약정보리스트 가져오기 -->
<select id="getAllReserveInfoByReserveId" parameterType="int" resultType="Reservation" >
	SELECT 
		R.reservation_id, 
		U.user_tel, 
		U.user_name
	FROM 
		reservation R	
	INNER JOIN users U
	ON R.user_no = U.user_no
	WHERE R.reservation_status = '예약'
	and R.reservation_id = #{value}
	order by R.reservation_check_out
</select>

<!-- 	String getAllReserveInfoByReserveId(int reservationId); 예약정보 한개 가져오기 -->
<select id="getReserveInfoByReserveId" parameterType="int" >
	SELECT 
		R.reservation_id, 
		U.user_tel, 
		U.user_name
	FROM 
		reservation R	
	INNER JOIN users U
	ON R.user_no = U.user_no
	WHERE R.reservation_id = #{value}
	order by R.reservation_check_out
</select>


<!-- void updateReservationStatus(Reservation reservation);  예약 상태변경하기 (예약가능 / 만실)-->
<update id="updateReservationStatus" parameterType="kr.co.nc.vo.Reservation">
	update
		reservation
	set
		reservation_status = #{status},
		reservation_check_in =#{checkIn},
		reservation_check_out = #{checkOut}
	where
		reservation_id = #{reservationId}
</update>



</mapper>